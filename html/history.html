<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>抄表历史</title>
    <link rel="stylesheet" href="../static/common/ydui-0.1.3/build/css/ydui.css">
    <link rel="stylesheet" href="../static/css/main.css">
    <script src="../static/common/ydui-0.1.3/build/js/ydui.flexible.js"></script>
</head>
<body>
    <div class="container">
        <section class="g-flexview">
            <header class="m-navbar">
                <a href="detail.html" class="navbar-item"><i class="back-ico"></i></a>
                <div class="navbar-center">
                    <span class="navbar-title">抄表历史</span>
                </div>
            </header>
            <section class="g-scrollview detail-g-scrollview">
                <div id="J_Tab" class="m-tab history-tab">
                    <ul class="tab-nav">
                        <li class="tab-nav-item tab-active"><a href="javascript:;">水表</a></li>
                        <li class="tab-nav-item"><a href="javascript:;">燃气表</a></li>
                        <li class="tab-nav-item"><a href="javascript:;">冷水表</a></li>
                        <li class="tab-nav-item"><a href="javascript:;">热水表</a></li>
                    </ul>
                    <div class="tab-panel">
                        <div class="tab-panel-item tab-active">
                            <!-- <div class="history-table-header">
                                <ul class="m-grids-5">
                                    <li class="grids-item">
                                        <div class="grids-txt">抄表时间</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">上次读数</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">本次读数</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">租客</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">操作</div>
                                    </li>
                                </ul>
                            </div>
                            <div class="history-table-body">
                                <ul class="m-grids-5">
                                    <li class="grids-item">
                                        <div class="grids-txt">2019.4.23</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">6.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">10.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">徐乐</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">已作废</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">2019.4.23</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">6.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">10.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">徐乐</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">已作废</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">2019.4.23</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">6.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">10.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">徐乐</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">已作废</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">2019.4.23</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">6.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">10.00</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">徐乐</div>
                                    </li>
                                    <li class="grids-item">
                                        <div class="grids-txt">已作废</div>
                                    </li>
                                </ul>
                            </div> -->
                        </div>
                        <div class="tab-panel-item"></div>
                        <div class="tab-panel-item"></div>
                        <div class="tab-panel-item"></div>
                    </div>
                </div>
            </section>

        </section>
    </div>
    <script id="J_ListHtml" type="text/html">
        <div class="history-table-header">
            <ul class="m-grids-5">
                <li class="grids-item">
                    <div class="grids-txt">抄表时间</div>
                </li>
                <li class="grids-item">
                    <div class="grids-txt">上次读数</div>
                </li>
                <li class="grids-item">
                    <div class="grids-txt">本次读数</div>
                </li>
                <li class="grids-item">
                    <div class="grids-txt">租客</div>
                </li>
                <li class="grids-item">
                    <div class="grids-txt">操作</div>
                </li>
            </ul>
        </div>
        <div class="history-table-body">
            <ul class="m-grids-5">
                {{each list as data}}
                    <li class="grids-item">
                        <div class="grids-txt">{{data.time}}</div>
                    </li>
                    <li class="grids-item">
                        <div class="grids-txt">{{data.lastnum}}</div>
                    </li>
                    <li class="grids-item">
                        <div class="grids-txt">{{data.thisnum}}</div>
                    </li>
                    <li class="grids-item">
                        <div class="grids-txt">{{data.name}}</div>
                    </li>
                    <li class="grids-item">
                        <div class="grids-txt">{{data.operation}}</div>
                    </li>
                {{/each}}
            </ul>
        </div>
    </script>
    <script src="../static/common/jquery/2.1.4/jquery.min.js"></script>
    <script src="../static/common/ydui-0.1.3/build/js/ydui.js"></script>
    <script src="../static/common/artTemplate/template.js"></script>
    <script>
        /**
         * Javascript API调用Tab
         */
        !function ($) {
            var $tab = $('#J_Tab');
    
            $tab.tab({
                nav: '.tab-nav-item',
                panel: '.tab-panel-item',
                activeClass: 'tab-active'
            });
    
            // 获取表格数据
            function getTableData() {
                var tableData = [];
                for (var i = 0; i < 100; i++) {
                    tableData.push({'time': '2019.4.23', 'lastnum': '6.00', 'thisnum': '10.00', 'name': '徐乐', 'operation': '已作废'});
                }
                // console.log(tableData);
                return tableData;
            }
            
            var html = template('J_ListHtml', {list: getTableData()}); // template.js 渲染模板数据
            // console.log(html);
            var tabItem = $('.tab-panel-item');
            tabItem[0].innerHTML = html;
            /*
             $tab.find('.tab-nav-item').on('open.ydui.tab', function (e) {
                 console.log('索引：%s - [%s]正在打开', e.index, $(this).text());
             });
             */
    
            $tab.find('.tab-nav-item').on('opened.ydui.tab', function (e) {
                console.log('索引：%s - [%s]已经打开了', e.index, $(this).text());
                console.log($(this));
                tabItem[e.index].innerHTML = html;
            });
        }(jQuery);
    </script>
</body>
</html>