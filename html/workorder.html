<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>工单服务</title>
    <link rel="stylesheet" href="../static/common/ydui-0.1.3/build/css/ydui.css">
    <link rel="stylesheet" href="../static/css/workorder.css">
    <script src="../static/common/ydui-0.1.3/build/js/ydui.flexible.js"></script>
</head>
<body>
    <div class="container">
        <section class="g-flexview" id="workOrder">
            <header class="m-navbar">
                <div class="navbar-center">
                    <span class="navbar-title">工单服务</span>
                </div>
            </header>
            <section class="g-scrollview">
                <div class="work-order-header">
                    <div class="filter-icon" onclick="openFilter()">筛选</div>
                    <div class="unfinished-workorder">11</div>
                </div>
                <div class="calender-area"></div>
                <div class="work-order-content">
                    <div class="m-cell">
                        <a href="javascript:;" class="cell-item">
                            <div class="cell-left">超期工单</div>
                            <div class="cell-right cell-arrow"></div>
                        </a>
                    </div>
                    <div class="work-order-list">
                        
                    </div>
                </div>

                <footer class="m-tabbar tabbar-fixed workorder-tabbar">
                    <a href="./workorder.html" class="tabbar-item tabbar-active">
                        <span class="tabbar-icon">
                            <i class="icon-work-order"></i>
                            <!-- <span class="badge badge-danger">2</span> -->
                        </span>
                        <span class="tabbar-txt"></span>
                    </a>
                    <a href="./workbench.html" class="tabbar-item">
                        <span class="tabbar-icon">
                            <i class="icon-work-bench"></i>
                        </span>
                        <span class="tabbar-txt"></span>
                    </a>
                    <a href="./about.html" class="tabbar-item">
                        <span class="tabbar-icon">
                            <i class="icon-myself-module"></i>
                            <!-- <span class="tabbar-dot"></span> -->
                        </span>
                        <!-- <span class="tabbar-txt">77</span> -->
                    </a>
                </footer>
            </section>
            <div id="filter-drawer" class="filter-drawer">
                <div class="filter-drawer-body">
                    <div class="filter-drawer-list">
                        <p>视图</p>
                        <div class="filter-drawer-item">
                            <span>我负责的</span>
                            <span>我协同的</span>
                            <span>我创建的</span>
                        </div>
                        <p>状态</p>
                        <div class="filter-drawer-item">
                            <span>未完成</span>
                            <span>已指派</span>
                            <span>已接受</span>
                            <span>进行中</span>
                            <span>已完成</span>
                            <span>异常</span>
                        </div>
                        <p>类型</p>
                        <div class="filter-drawer-item">
                            <span>全部</span>
                            <span>科技服务工单</span>
                            <span>返修服务工单</span>
                            <span>智慧能源工单</span>
                            <span>科技现场服务工单</span>
                        </div>
                        <p>计划时间</p>
                        <div class="filter-drawer-item">
                            <span>全部</span>
                            <span>今日</span>
                            <span>本周</span>
                            <span>本月</span>
                        </div>
                    </div>
                    <div class="operation-area">
                        <div class="filter-button-area">
                            <div onclick="closeFilter()">重置</div>
                            <div onclick="closeFilter()">确定</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="mask-black"></div>
    </div>

    <script id="J_ListHtml" type="text/html">
        {{each list as data}}
        <a href="workorder-detail.html" class="list-item">
            <div>
                标题：<span>{{data.title}}</span>
            </div>
            <div>
                类型：<span>{{data.type}}</span>
            </div>
            <div>
                房间：<span>{{data.room}}</span>
            </div>
            <div>
                联系人：<span>{{data.contact}}</span>
            </div>
            <div class="list-item-footer">
                <div>执行人：<span>{{data.executor}}</span></div>
                <div>计划时间：<span>{{data.time}}</span></div>
            </div>
            <div class="status">进行中</div>
        </a>
        {{/each}}
    </script>
    <script src="../static/common/jquery/2.1.4/jquery.min.js"></script>
    <script src="../static/common/ydui-0.1.3/build/js/ydui.js"></script>
    <script src="../static/common/artTemplate/template.js"></script>
    <script>
        !function ($) {
            // 获取工单列表数据
            function getListData() {
                var listData = [];
                for (var i = 0; i < 20; i++) {
                    listData.push({'title': '房间灯坏了', 'type': '报事/报修', 'room': '紫金尚园5-701（表号）', 'contact': '姬磊', 'executor': '***', 'time': '2019.5.20'});
                }
                // console.log(listData);
                return listData;
            }
            
            var html = template('J_ListHtml', {list: getListData()}); // template.js 渲染模板数据
            $('.work-order-list').html(html);
        }(jQuery);

        function openFilter() {
            $('#filter-drawer').show();
            $('.mask-black').show();
        }
        function closeFilter() {
            $('#filter-drawer').hide();
            $('.mask-black').hide();
        }
    </script>
</body>
</html>